webpackJsonp([1],{NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("7+uW"),a={name:"Imager",data:function(){return{msg:"Welcome to Your Vue.js App"}},props:{name:{type:String,default:"おひげ"},message:{type:String,default:"がおー！"},messageBoxSrc:{type:String,default:"/ffxiv/static/fukidashi02.png"}},mounted:function(){this.file=document.getElementById("file"),this.result=document.getElementById("result"),this.canvas=this.$el.querySelector("#canvas"),this.ctx=this.canvas.getContext("2d"),this.img=new Image,this.img.src="/ffxiv/static/default.jpg",this.messageBoxImage=new Image,this.messageBoxImage.src=this.messageBoxSrc,this.canvasDraw()},methods:{onFileChange:function(e){this.fileList=e.target.files||e.dataTransfer.files,this.loadLocalImage(this.fileList[0])},onMsgChange:function(){this.canvasDraw()},loadLocalImage:function(e){var t=this;e.type.match("image.*")?(this.reader=new FileReader,this.img=new Image,this.reader.onloadend=function(){t.img.onload=function(){t.canvasDraw()},t.img.src=t.reader.result},this.reader.readAsDataURL(e)):alert("画像を選択してください")},canvasDraw:function(){var e=this,t=new Image;t.onload=function(){e.getSize(t),e.canvas.width=e.imageWidth,e.canvas.height=e.imageHeight,e.ctx.clearRect(0,0,e.imageWidth,e.imageHeight),e.ctx.drawImage(t,0,0,e.imageWidth,e.imageHeight),e.ctx.drawImage(e.messageBoxImage,e.messageBoxPosition.x,e.messageBoxPosition.y,e.messageBoxPosition.w,e.messageBoxPosition.h),e.addText()},t.src=this.img.src},getSize:function(e){var t=e.naturalWidth,i=t/e.naturalHeight;this.imageWidth=Math.min(t,1e3),this.imageHeight=this.imageWidth/i,this.messageBoxPosition={x:this.imageWidth/2-.2*this.imageHeight*(657/158)/2,y:this.imageHeight*(715/900),w:.2*this.imageHeight*(657/158),h:.2*this.imageHeight},this.namePosition={x:this.messageBoxPosition.x+.08*this.messageBoxPosition.w,y:this.imageHeight*(737/900),size:Math.round(.021*this.imageHeight)},this.messagePosition={x:this.namePosition.x,y:this.imageHeight*(777/900),size:this.namePosition.size},console.log("====================="),console.log(this.namePosition.size),console.log("====================="),console.log(i),console.log(this.imageWidth),console.log(this.imageHeight),console.log("this.messageBoxPosition"),console.log(this.messageBoxPosition),console.log("this.namePosition"),console.log(this.namePosition),console.log("this.messagePosition"),console.log(this.messagePosition)},addText:function(){var e=this.namePosition.size+"px",t=this.messagePosition.size+"px";this.ctx.textAlign="left",this.ctx.textBaseline="middle",this.ctx.fillStyle="#FFFFFF",this.ctx.font="normal "+e+" 'Noto Sans JP'",this.ctx.fillText(this.name,this.namePosition.x,this.namePosition.y),this.ctx.fillStyle="#000000",this.ctx.font="normal "+t+" 'Noto Sans JP'";for(var i=this.message.split("\n"),s=0,a=i.length;a>s;s++){var n=i[s],o=0;s&&(o+=1.4*this.namePosition.size*s),this.ctx.fillText(n,this.messagePosition.x,this.messagePosition.y+o)}}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"imager"},[i("canvas",{staticClass:"canvas",attrs:{id:"canvas"}}),i("div",{staticClass:"upload"},[i("input",{attrs:{type:"file",name:"file",id:"file"},on:{change:e.onFileChange}})]),i("div",{staticClass:"name"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",name:"name",id:"mame"},domProps:{value:e.name},on:{change:e.onMsgChange,input:function(t){t.target.composing||(e.name=t.target.value)}}})]),i("div",{staticClass:"message"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{name:"example",cols:"50",rows:"10"},domProps:{value:e.message},on:{change:e.onMsgChange,input:function(t){t.target.composing||(e.message=t.target.value)}}})]),i("div",{attrs:{id:"result"}}),i("p",[e._v("このページはβ版です。いろいろきちんとできたら移設します。")])])},staticRenderFns:[]};var o={name:"App",components:{Imager:i("VU/8")(a,n,!1,function(e){i("tsuy")},"data-v-21bc97bb",null).exports}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Imager")],1)},staticRenderFns:[]};var m=i("VU/8")(o,g,!1,function(e){i("xZkp")},null,null).exports;s.a.config.productionTip=!1,new s.a({el:"#app",components:{App:m},template:"<App/>"})},tsuy:function(e,t){},xZkp:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2996509005a6330de624.js.map